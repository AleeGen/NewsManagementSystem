package ru.clevertec.loggingstarter.exploitation;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import ru.clevertec.loggingstarter.config.LoggingAutoConfiguration;
import ru.clevertec.loggingstarter.data.OnClassLogging;
import ru.clevertec.loggingstarter.data.OnMethodLogging;

import static org.assertj.core.api.Assertions.assertThat;

@SpringBootTest(classes = {LoggingAutoConfiguration.class, OnClassLogging.class, OnMethodLogging.class},
        properties = "ru.clevertec.logging.enabled=true")
class LoggingPostProcessorTest {

    @Autowired
    LoggingPostProcessor postProcessor;

    @Test
    void shouldAddLoggers() {
        int expected = 2;
        int actual = postProcessor.getLogMap().size();
        assertThat(actual).isEqualTo(expected);
    }

}